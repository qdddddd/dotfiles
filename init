#!/bin/zsh

setopt EXTENDED_GLOB

git submodule update --init --recursive

# Create local bin sym links
if [ -s $HOME/.local ]; then
    BINDIR=$HOME/.local/bin
elif [ -s /usr/local/bin/ ]; then
    BINDIR=/usr/local/bin
else
    BINDIR=$HOME/.local/bin
fi

#for xfile in ${PWD}/bin/*; do
#    ln -s "$xfile" "$BINDIR/${xfile:t}"
#done

# Create vim config sym links
curl -fLo ~/.vim/autoload/plug.vim --create-dirs \
    https://raw.githubusercontent.com/junegunn/vim-plug/master/plug.vim
for lcfile in ${PWD}/vim/rc/^*(README.md|init)*; do
    ln -s "$lcfile" "$HOME/.vim/${lcfile:t}"
done
ln -s ${PWD}/vim/ycm_extra_conf.py "$HOME/.vim/ycm_extra_conf.py"
vim +PlugInstall +qa!

# Create zsh config sym links
for rcfile in "${PWD}"/zsh/configs/*; do
    ln -s "$rcfile" "$HOME/.${rcfile:t}"
done
source $HOME/.zshrc

# Create tmux.conf sym link
ln -s "${PWD}/tmux.conf" "$HOME/.tmux.conf"
git clone https://github.com/tmux-plugins/tpm $HOME/.tmux/plugins/tpm

# Create git global config sym links
ln -s "${PWD}/gitconfig" "$HOME/.gitconfig"
ln -s "${PWD}/gitignore_global" "$HOME/.gitignore_global"
